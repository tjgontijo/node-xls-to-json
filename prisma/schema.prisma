// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Plan {
  planId                            String         @id
  year                              Int
  state                             String
  thematicArea                      String
  diagnosis                         String
  justification                     String
  generalGoal                       String
  implementationStrategy            String
  diagnosticImplementationStrategy  String
  governanceImplementationStrategy  String
  capacityImplementationStrategy    String
  acquisitionImplementationStrategy String
  specificGoals                     SpecificGoal[]

  @@map("plans")
}

model SpecificGoal {
  goalId    String   @id
  planId    String
  shortName String
  name      String
  plan      Plan     @relation(fields: [planId], references: [planId])
  actions   Action[]

  @@map("specific_goals")
}

model Action {
  actionId     String       @id
  actionNum    String
  actionName   String
  goalId       String
  specificGoal SpecificGoal @relation(fields: [goalId], references: [goalId])
  items        Item[]

  @@map("actions")
}

model Item {
  itemId                      String @id
  actionId                    String
  financedItem                String
  itemDescription             String
  senaspItemCode              String
  institution                 String
  expenseType                 String
  plannedQuantity             Int
  measurementUnit             String
  plannedValue                Float
  processIndicatorDescription String
  processIndicatorFormula     String
  periodicity                 String
  pmspGoal                    String
  pespGoal                    String
  action                      Action @relation(fields: [actionId], references: [actionId])

  @@map("items")
}
